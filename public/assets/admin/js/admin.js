let selected=[];function showToasts(t,e){$(".bs-toast").toast("show"),$(".toast-body").text(t),"success"==e?($(".toast-header").addClass("bg-success"),$(".toast-header").removeClass("bg-danger")):($(".toast-header").addClass("bg-danger"),$(".toast-header").removeClass("bg-success"))}function updateEditorValues(){void 0!==window.editors&&null!==window.editors&&Object.keys(window.editors).length>0&&Object.keys(window.editors).forEach(t=>{let e=t.replace("editor_","");$(`#${e}-value`).val(window.editors[t].getData())}),void 0!==window.ace_editor&&null!==window.ace_editor&&Object.keys(window.ace_editor).length>0&&Object.keys(window.ace_editor).forEach(t=>{let e=t.replace("_ace_editor","");$(`#${e}_ace_value`).val(window.ace_editor[t].getValue())})}function addHiddenInputAndSubmit(t){$("<input>").attr({type:"hidden",name:"shouldRedirect",value:t}).appendTo("#formAccountSettings"),$("#formAccountSettings").submit()}function deleteRecord(t){Swal.fire({title:"Thông báo?",text:"Bạn chắc chắn muốn xoá bản ghi này!",icon:"warning",showCancelButton:!0,confirmButtonText:"Chắc chắn!",customClass:{confirmButton:"btn btn-primary me-3",cancelButton:"btn btn-label-secondary"},buttonsStyling:!1}).then(function(e){e.value?$.ajax({type:"GET",url:t,success:function(t){(t=JSON.parse(t)).success&&(Swal.fire({icon:"success",title:"Thành công!",text:"Đã xoá bản ghi thành công!",customClass:{confirmButton:"btn btn-success"}}),setTimeout(()=>{window.location.reload()},300))},error:function(t){console.log(t)}}):e.dismiss===Swal.DismissReason.cancel&&Swal.fire({title:"Huỷ bỏ",text:"Bản ghi chưa được xoá",icon:"error",customClass:{confirmButton:"btn btn-success"}})})}function performAjaxRequest(t,e){$.ajax({type:"POST",url:t,data:{ids:selected,model:e},success:function(t){let e=200==t.status?"success":"error",s=200==t.status?"Thành công!":"Thất bại!";Swal.fire({icon:e,title:s,text:t.message,customClass:{confirmButton:"btn btn-success"}}),200==t.status&&setTimeout(()=>{window.location.reload()},300)},error:function(t){console.log(t)}})}$(document).ready(function(){$(".select2").select2(),$(".delete-record").click(function(){deleteRecord($(this).data("link"))}),$("#submit1, #submit2, #submit3").on("click",function(t){t.preventDefault();let e=$(this).attr("id").replace("submit","");updateEditorValues(),addHiddenInputAndSubmit(e)}),$("#selectAllRecord").on("change",function(){var t=$(this).is(":checked");$(".form-record[type=checkbox]").not("#selectAllRecord").prop("checked",t),$(".form-record[type=checkbox]").not("#selectAllRecord").each(function(){$(this).is(":checked")?selected.push($(this).val()):selected=selected.filter(t=>t!=$(this).val())})}),$(".form-record[type=checkbox]").not("#selectAllRecord").on("change",function(){$(this).is(":checked")?selected.push($(this).val()):selected=selected.filter(t=>t!=$(this).val())}),$(".button-action").on("click",function(){let t=$(this).data("link"),e=$(this).data("model");"/api/delete"==t?Swal.fire({title:"Thông báo?",text:"Bạn chắc chắn muốn xoá bản ghi này!",icon:"warning",showCancelButton:!0,confirmButtonText:"Chắc chắn!",customClass:{confirmButton:"btn btn-primary me-3",cancelButton:"btn btn-label-secondary"},buttonsStyling:!1}).then(function(s){s.value?performAjaxRequest(t,e):s.dismiss===Swal.DismissReason.cancel&&Swal.fire({title:"Huỷ bỏ",text:"Bản ghi chưa được xoá",icon:"error",customClass:{confirmButton:"btn btn-success"}})}):performAjaxRequest(t,e)}),$(".form-check-input-status").on("change",function(){let t=$(this).attr("id");$(this).is(":checked")?$(this).data("link",`/api/${t}/1`):$(this).data("link",`/api/${t}/0`);let e=$(this).data("link"),s=$(this).data("model");$.ajax({type:"POST",url:e,data:{ids:[parseInt($(this).data("id"))],model:s},success:function(t){t.status,t.status;200==t.status?showToasts(t.message,"success"):showToasts(t.message,"error")},error:function(t){console.log(t)}})})});
